---
import PageLayout from '../layouts/PageLayout.astro';
import NoteGrid from '../components/NoteGrid.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';
import { getCollection } from 'astro:content';

// Get the latest notes
const allNotes = await getCollection('notes');
const latestNotes = allNotes
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 6); // Show latest 6 notes
---

<PageLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<div class="text-center py-20 mb-16">
		<h1 class="sr-only">Field Notes on Modern Humanity</h1>
		<p class="text-xl text-secondary mb-8 max-w-2xl mx-auto leading-relaxed">
			Observations on the human experience in our digital age.
		</p>
	</div>
	
	<section class="container container-content">
		<NoteGrid 
			notes={latestNotes}
			title="Latest Notes"
			description="Recent thoughts and observations on modern humanity"
			showTitle={true}
			showDescription={true}
			columns={3}
			variant="featured-first"
			className="mb-16"
		/>
	</section>
</PageLayout>

<style>
	/* Screen reader only class for visually hidden content */
	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border: 0;
	}

	/* Responsive adjustments for hero section */
	@media (max-width: 768px) {
		.hero {
			padding: var(--space-16) 0 var(--space-12);
		}

		.hero h1 {
			font-size: var(--text-4xl);
		}

		.hero-subtitle {
			font-size: var(--text-lg);
		}

		.hero-actions {
			flex-direction: column;
			align-items: center;
		}

		.btn {
			width: 200px;
		}
	}

	@media (max-width: 480px) {
		.hero h1 {
			font-size: var(--text-3xl);
		}

		.hero-subtitle {
			font-size: var(--text-base);
		}
	}
</style>